<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Gap Predictor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Landing Page Styles */
        .landing-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .landing-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero-text p {
            font-size: 1.3rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .job-form {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .job-form:hover {
            transform: translateY(-5px);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: rgba(255,255,255,0.9);
            font-size: 1rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .form-group input:focus,
        .form-group select:focus {
            background: white;
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
            transform: scale(1.02);
        }

        .start-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(255,107,107,0.3);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255,107,107,0.4);
        }

        /* Process Flow Styles */
        .process-page {
            display: none;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 40px 0;
        }

        .process-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .process-header h2 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.1);
        }

        .step.completed .step-number {
            background: #4caf50;
            color: white;
        }

        .step-title {
            font-size: 0.9rem;
            text-align: center;
            color: #666;
        }

        .step.active .step-title {
            color: #333;
            font-weight: 600;
        }

        .content-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .content-card small{
            color: #888;
            font-size: 0.8rem;
            font-style: italic;
            text-align: center;
            display:block;
            margin-bottom: 40px
        }

        /* Enhanced Trend Analysis Styles from v5 */
        .trend-tabs {
            display: flex;
            justify-content: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 8px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 40px;
        }

        .trend-tab {
            flex: 1;
            padding: 18px 30px;
            background: none;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            font-size: 1.1rem;
            color: #4a5568;
        }

        .trend-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .trend-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .trend-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Current Trends 2025 Layout */
        .current-layout {
            display: grid;
            grid-template-areas: 
                "skills growth"
                "tech insights";
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 40px;
        }

        .skills-card { grid-area: skills; }
        .growth-card { grid-area: growth; }
        .tech-card { grid-area: tech; }
        .insights-card { grid-area: insights; }

        /* Future Forecast Layout */
        .forecast-layout {
            display: grid;
            grid-template-areas: 
                "predictions predictions"
                "priorities opportunities";
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .predictions-card { 
            grid-area: predictions;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #333;
        }
        .predictions-card h3 { color: #333 !important; }
        .priorities-card { grid-area: priorities; }
        .opportunities-card { grid-area: opportunities; }

        .trend-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .trend-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .trend-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .trend-card h3 {
            color: #2d3748;
            margin-bottom: 25px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .icon {
            font-size: 1.8rem;
        }

        .skill-list {
            list-style: none;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e2e8f0;
            transition: background 0.2s ease;
        }

        .skill-item:hover {
            background: rgba(102, 126, 234, 0.05);
            border-radius: 8px;
            margin: 0 -10px;
            padding: 15px 10px;
        }

        .skill-item:last-child {
            border-bottom: none;
        }

        .skill-name {
            font-weight: 600;
            color: #2d3748;
            font-size: 1.05rem;
        }

        .growth-badge {
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: bold;
            color: white;
        }

        .growth-high { background: linear-gradient(135deg, #e53e3e, #e53e3e); }
        .growth-high-1 { background: linear-gradient(135deg, #FF6384, #FF6384); }
        .growth-medium { background: linear-gradient(135deg, #36A2EB, #36A2EB); }
        .growth-medium-1 { background: linear-gradient(135deg, #FFCE56, #FFCE56); }
        .growth-low { background: linear-gradient(135deg, #4BC0C0, #4BC0C0); }
        .growth-critical { background: linear-gradient(135deg, #9966FF, #9966FF); }

        .chart-container {
            position: relative;
            height: 320px;
            margin-top: 20px;
        }

        .timeline {
            position: relative;
            margin-top: 20px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 35px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border-left: 5px solid #fa709a;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .year {
            font-size: 1.4rem;
            font-weight: bold;
            color: #fa709a;
            margin-bottom: 12px;
        }

        .timeline-item h4 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .timeline-item p {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .prediction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .prediction-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .prediction-card:hover {
            transform: scale(1.05);
        }

        .prediction-card h4 {
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .prediction-card .stat {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .prediction-card .desc {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(255, 235, 59, 0.1), rgba(255, 193, 7, 0.1));
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #e65100;
            margin-bottom: 10px;
        }

        .priority-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .priority-item:last-child {
            border-bottom: none;
        }

        .priority-level {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 15px;
        }

        .priority-high { background: #e53e3e; }
        .priority-medium { background: #ff9800; }
        .priority-low { background: #2196f3; }

        /* Enhanced Skill Analysis Styles - Modified for Top-Bottom Layout */
        .skill-analysis-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-bottom: 40px;
        }

        .resume-upload-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            border: 2px dashed #dee2e6;
            transition: all 0.3s ease;
            cursor: pointer;
            width: 100%;
        }

        .resume-upload-section:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .resume-upload-section.uploaded {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.05);
            border-style: solid;
        }

        .upload-icon {
            font-size: 48px;
            color: #6c757d;
            margin-bottom: 20px;
        }

        .upload-icon.uploaded {
            color: #28a745;
        }

        .upload-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .upload-subtitle {
            color: #6c757d;
            margin-bottom: 20px;
        }

        .upload-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .skill-rating-section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            width: 100%;
        }

        .skill-rating-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .skill-rating-item {
            display: grid;
            grid-template-columns: 300px 1fr 120px; /* Fixed width for skill name, flexible for rating, fixed for label */
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #f8f9fa;
            gap: 30px;
        }

        .skill-name-rating {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #333;
            width: 100%; /* Use full width of the grid column */
        }

        .skill-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 18px;
            flex-shrink: 0; /* Prevent icon from shrinking */
        }

        .rating-container {
            display: flex;
            align-items: center;
            justify-content: flex-start; /* Align to start */
            width: 100%;
        }

        .rating-stars {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .rating-star {
            width: 35px;
            height: 35px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #6c757d;
            font-size: 14px;
            flex-shrink: 0; /* Prevent stars from shrinking */
        }

        .rating-star:hover,
        .rating-star.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: scale(1.1);
        }

        .rating-label {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
            text-align: left;
            width: 100%; /* Use full width of the grid column */
            margin-left: 20px;
        }

        .generate-analysis-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
        }

        .generate-analysis-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(40, 167, 69, 0.4);
        }

        .generate-analysis-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Skills Comparison Results */
        .skills-comparison {
            display: none;
            margin-top: 40px;
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            color: white;
        }

        .comparison-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .comparison-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .skills-overview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .skill-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            text-align: center;
        }

        .skill-card.critical {
            border-left: 4px solid #dc3545;
        }

        .skill-card.improve {
            border-left: 4px solid #ffc107;
        }

        .skill-card.strong {
            border-left: 4px solid #28a745;
        }

        .skill-number {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .skill-number.critical { color: #dc3545; }
        .skill-number.improve { color: #ffc107; }
        .skill-number.strong { color: #28a745; }

        .skill-label {
            color: #6c757d;
            font-weight: 500;
        }

        .skills-table {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .table-header {
            background: #f8f9fa;
            padding: 20px 30px;
            font-weight: 600;
            border-bottom: 1px solid #dee2e6;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 3fr 1fr;
            gap: 20px;
            align-items: center;
        }

        .skill-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 3fr 1fr;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid #f8f9fa;
            gap: 20px;
        }

        .skill-row:hover {
            background: #f8f9fa;
        }

        .skill-info {
            display: flex;
            align-items: center;
        }

        .priority-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .priority-high {
            background: #ffeaa7;
            color: #d63031;
        }

        .priority-medium {
            background: #fab1a0;
            color: #e17055;
        }

        .priority-low {
            background: #81ecec;
            color: #00b894;
        }

        .demand-percent {
            font-weight: 600;
            color: #667eea;
        }

        .growth-rate {
            color: #28a745;
            font-weight: 600;
        }

        .study-direction {
            color: #6c757d;
            font-size: 14px;
        }

        .practice-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }



        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .phase-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .phase-duration {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }



        .interview-practice {
            text-align: center;
            padding: 40px;
        }

        .camera-container {
            width: 300px;
            height: 200px;
            background: #000;
            border-radius: 15px;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
        }

        .continue-btn {
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(76,175,80,0.3);
        }

        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-right: 15px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        @media (max-width: 1024px) {
            .current-layout,
            .forecast-layout {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "skills"
                    "growth"
                    "tech"
                    "insights";
            }

            .forecast-layout {
                grid-template-areas: 
                    "predictions"
                    "priorities"
                    "opportunities";
            }
        }

        @media (max-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }

            .trend-tabs {
                flex-direction: column;
                max-width: 300px;
            }

            .skills-overview {
                grid-template-columns: 1fr;
            }

            .table-header,
            .skill-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            /* Mobile adjustments for skill rating */
            .skill-rating-item {
                grid-template-columns: 1fr; /* Stack vertically on mobile */
                gap: 15px;
                text-align: left;
            }
            
            .skill-name-rating {
                justify-content: flex-start;
            }
            
            .rating-container {
                justify-content: flex-start;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .rating-stars {
                order: 1;
            }
            
            .rating-label {
                order: 2;
                margin-top: 8px;
            }
        }

        @media (max-width: 480px) {
            .skill-rating-item {
                padding: 15px 0;
            }
            
            .skill-icon {
                width: 35px;
                height: 35px;
                font-size: 16px;
                margin-right: 12px;
            }
            
            .rating-star {
                width: 32px;
                height: 32px;
                font-size: 13px;
            }
        }

        /*roadmap*/
        .roadmap-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
        }

        .roadmap-header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
        }

        .roadmap-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .roadmap-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        .progress-section {
            background: #f8f9fa;
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .progress-header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .progress-icon {
            font-size: 2rem;
        }

        .progress-info h3 {
            color: black;
            font-size: 1.4rem;
            margin-bottom: 5px;
        }

        .progress-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            color: black;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .progress-bar-modern {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill-modern {
            height: 100%;
            background: linear-gradient(90deg, #00f2fe, #4facfe);
            width: 25%;
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 10px rgba(79, 172, 254, 0.5);
        }

        .roadmap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            position: relative;
        }

        .roadmap-phase {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .roadmap-phase::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .roadmap-phase:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }

        .phase-header {
            display: flex;
            justify-content: flex-start; /* Changed from space-between */
            align-items: center;
            gap: 20px; /* Add consistent gap */
            margin-bottom: 25px;
        }

        .phase-number {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .phase-info h3 {
            font-size: 1.5rem;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .phase-duration {
            display: inline-block;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .phase-description {
            color: #6c757d;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .learning-modules {
            display: grid;
            gap: 15px;
        }

        .module {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .module:hover {
            background: #e9ecef;
            border-left-color: #667eea;
            transform: translateX(5px);
        }

        .module-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .module-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #2d3748;
        }

        .module-icon {
            font-size: 1.2rem;
        }

        .module-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-todo {
            background: #ffeaa7;
            color: #d63031;
        }

        .status-progress {
            background: #74b9ff;
            color: white;
        }

        .status-completed {
            background: #00b894;
            color: white;
        }

        .module-content {
            color: #6c757d;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .module-resources {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .resource-tag {
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
            text-decoration: none;
            transition: transform 0.2s ease;
        }

        .resource-tag:hover {
            transform: translateY(-2px);
        }

        .tag-course { background: #dbeafe; color: #1e40af; }
        .tag-book { background: #fef3c7; color: #d97706; }
        .tag-tutorial { background: #e0e7ff; color: #5b21b6; }
        .tag-article { background: #dcfce7; color: #166534; }
        .tag-practice { background: #fecaca; color: #dc2626; }

        .phase-completion {
            margin-top: 25px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 12px;
            text-align: center;
        }

        .completion-bar {
            width: 100%;
            height: 8px;
            background: rgba(102, 126, 234, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .completion-progress {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .completion-text {
            font-size: 0.9rem;
            color: #667eea;
            font-weight: 600;
        }

        /* Connecting Lines Animation */
        .connection-line {
            position: absolute;
            width: 3px;
            background: linear-gradient(180deg, #667eea, transparent);
            left: 50%;
            transform: translateX(-50%);
            z-index: -1;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        /* Milestone Indicators */
        .milestone {
            position: relative;
            margin: 40px 0;
        }

        .milestone::before {
            content: '🎯';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            background: white;
            padding: 10px;
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .milestone-text {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 30px;
            border-radius: 25px;
            margin-top: 50px;
            font-weight: 600;
            color: #2d3748;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 50px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .roadmap-title {
                font-size: 2rem;
            }
            
            .roadmap-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Interactive Elements */
        .interactive-tooltip {
            position: relative;
            cursor: help;
        }

        .interactive-tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 1000;
        }

        /* Floating Elements */
        .floating-element {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .floating-element:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .floating-element:nth-child(2) { top: 20%; right: 15%; animation-delay: 2s; }
        .floating-element:nth-child(3) { bottom: 30%; left: 20%; animation-delay: 4s; }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
        
        .module-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #667eea;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-size: 16px;
            color: transparent;
        }

        .module-checkbox:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.1);
        }

        .module-checkbox.checked {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .module-checkbox.checked::before {
            content: '✓';
        }

        .module.completed {
            background: #f0f8f0;
            border-left-color: #28a745;
        }

        .module.completed .module-title {
            color: #28a745;
        }

        .completion-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .modules-count {
            font-weight: 600;
        }

        .voice-input-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #ffff;
    color: white;
    font-size: 1.8rem;
    border: none;
    cursor: pointer;
    margin: 20px auto; /* centers horizontally */
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}

.voice-input-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 12px 30px rgba(0,0,0,0.3);
}


    </style>
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage" class="landing-page">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Skill Gap Predictor</h1>
                    <p>Analyze market trends, identify skill gaps, and create personalized learning roadmaps to advance your career with AI-powered insights.</p>
                </div>
                <div class="job-form">
                    <h3 style="color: white; margin-bottom: 30px; text-align: center; font-size: 1.5rem;">Find Your Career Path</h3>
                    <form id="jobForm">
                        <div class="form-group">
                            <label for="desiredJob">Desired Job Title</label>
                            <input type="text" id="desiredJob" name="desiredJob" placeholder="e.g., Data Scientist, Web Developer" required>
                        </div>
                        <div class="form-group">
                            <label for="industry">Industry</label>
                            <select id="industry" name="industry" required>
                                <option value="">Select Industry</option>
                                <option value="technology">Technology</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="finance">Finance</option>
                                <option value="education">Education</option>
                                <option value="marketing">Marketing</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="experience">Experience Level</label>
                            <select id="experience" name="experience" required>
                                <option value="">Select Experience</option>
                                <option value="entry">Entry Level (0-2 years)</option>
                                <option value="mid">Mid Level (3-5 years)</option>
                                <option value="senior">Senior Level (6+ years)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="location">Preferred Location</label>
                            <input type="text" id="location" name="location" placeholder="e.g., New York, Remote" required>
                        </div>
                        <button type="submit" class="start-btn">Start Analysis</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Process Flow Page -->
    <div id="processPage" class="process-page">
        <div class="container">
            <div class="process-header">
                <h2 id="stepTitle">Trend Analysis</h2>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 25%"></div>
                </div>
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-title">Trend Analysis</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-title">Skill Gap Analysis</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-title">Learning Roadmap</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-title">Interview Practice</div>
                    </div>
                </div>
            </div>

            <!-- Step 1: Enhanced Trend Analysis with Tabs from v5 -->
            <div id="step1" class="content-card">
                <h3 style="margin-bottom: 30px; color: #333; text-align: center;">🧠 Data Scientist Trends for <span id="jobTitle"></span></h3>
                <p style="text-align: center; color: #666; margin-bottom: 20px;">Real-time insights and strategic forecasting for data science careers</p>
                <small>Last updated: July 29, 2025</small>
                
                <div class="trend-tabs">
                    <button class="trend-tab active" onclick="showTrendSection('current')">
                        📊 Current Trends 2025
                    </button>
                    <button class="trend-tab" onclick="showTrendSection('forecast')">
                        🔮 2026-2030 Forecast
                    </button>
                </div>

                <!-- CURRENT TRENDS 2025 SECTION -->
                <div id="current" class="trend-section active">
                    <div class="current-layout">
                        <!-- Top Skills -->
                        <div class="trend-card skills-card">
                            <h3><span class="icon">🔥</span>Hottest Skills 2025</h3>
                            <ul class="skill-list">
                                <li class="skill-item">
                                    <span class="skill-name">Prompt Engineering & GenAI</span>
                                    <span class="growth-badge growth-high">+29%</span>
                                </li>
                                <li class="skill-item">
                                    <span class="skill-name">TensorFlow & PyTorch</span>
                                    <span class="growth-badge growth-high-1">+22%</span>
                                </li>
                                <li class="skill-item">
                                    <span class="skill-name">MLOps & CI/CD Pipelines</span>
                                    <span class="growth-badge growth-medium">+20%</span>
                                </li>
                                <li class="skill-item">
                                    <span class="skill-name">Python</span>
                                    <span class="growth-badge growth-medium-1">+18%</span>
                                </li>
                                <li class="skill-item">
                                    <span class="skill-name">SQL & Data Warehousing</span>
                                    <span class="growth-badge growth-low">+14%</span>
                                </li>
                                <li class="skill-item">
                                    <span class="skill-name">Data Visualization Tools</span>
                                    <span class="growth-badge growth-critical">+12%</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Growth Analysis -->
                        <div class="trend-card growth-card">
                            <h3><span class="icon">📈</span>Skills Growth Analysis</h3>
                            <div class="chart-container">
                                <canvas id="growthChart"></canvas>
                            </div>
                        </div>

                        <!-- Essential Tech Stack -->
                        <div class="trend-card tech-card">
                            <h3><span class="icon">🛠️</span>Essential Tech Stack 2025</h3>
                            <div class="highlight-box">
                                <h4>🎯 Core Foundation</h4>
                                <p><strong>Programming:</strong> Python, R, SQL<br>
                                <strong>ML Frameworks:</strong> scikit-learn, TensorFlow, PyTorch<br>
                                <strong>Cloud Platforms:</strong> AWS, GCP, Azure</p>
                            </div>
                            <div class="chart-container">
                                <canvas id="techStackChart"></canvas>
                            </div>
                        </div>

                        <!-- Key Insights -->
                        <div class="trend-card insights-card">
                            <h3><span class="icon">💡</span>Key 2025 Insights</h3>
                            <div class="highlight-box">
                                <h4>🚨 Critical Shift: From Model Building to Production</h4>
                                <p>Companies now prioritize data scientists who can deploy and maintain ML systems in production environments.</p>
                            </div>
                            <div style="margin-top: 20px;">
                                <h4 style="color: #667eea; margin-bottom: 15px;">📈 Fastest Growing Specializations</h4>
                                <ul class="skill-list">
                                    <li class="skill-item">
                                        <span class="skill-name">Applied Generative AI</span>
                                        <span class="growth-badge growth-critical">Hot</span>
                                    </li>
                                    <li class="skill-item">
                                        <span class="skill-name">MLOps Engineering</span>
                                        <span class="growth-badge growth-high">High Demand</span>
                                    </li>
                                    <li class="skill-item">
                                        <span class="skill-name">Data Product Management</span>
                                        <span class="growth-badge growth-medium">Emerging</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FORECAST 2026-2030 SECTION -->
                <div id="forecast" class="trend-section">
                    <div class="forecast-layout">
                        <!-- Future Predictions -->
                        <div class="trend-card predictions-card">
                            <h3><span class="icon">🔮</span>Future Predictions 2026-2030</h3>
                            
                            <div class="timeline" style="margin-top: 30px;">
                                <div class="timeline-item">
                                    <div class="year">2026-2027: AI Integration Era</div>
                                    <h4>Mainstream GenAI Adoption</h4>
                                    <p><strong>Focus:</strong> LLM fine-tuning, advanced prompt engineering, and AutoML integration become standard practice.</p>
                                    <p><strong>Growth:</strong> AI/ML roles maintain 20-30% annual growth</p>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="year">2027-2028: Specialization Boom</div>
                                    <h4>Domain Expertise Premium</h4>
                                    <p><strong>Focus:</strong> Healthcare AI, FinTech analytics, and climate data science command 2x salary premiums over generalists.</p>
                                    <p><strong>Growth:</strong> Streaming analytics CAGR reaches 24%</p>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="year">2029-2030: Mature AI Ecosystem</div>
                                    <h4>Human-AI Collaboration</h4>
                                    <p><strong>Focus:</strong> Quantum ML applications, edge computing, and ethical AI governance become core competencies.</p>
                                    <p><strong>Growth:</strong> Sustained demand with emphasis on AI safety and interpretability</p>
                                </div>
                            </div>
                        </div>

                        <!-- Strategic Priorities -->
                        <div class="trend-card priorities-card">
                            <h3><span class="icon">🎯</span>Strategic Priorities</h3>
                            <h4 style="color: #667eea; margin-bottom: 20px;">Investment Priorities by Timeline</h4>
                            
                            <div style="margin-bottom: 25px;">
                                <h4 style="color: #e53e3e; margin-bottom: 15px;">🚨 2026-2027 (Critical)</h4>
                                <div class="priority-item">
                                    <div class="priority-level priority-high"></div>
                                    <div>
                                        <strong>Streaming Analytics & Real-time Processing</strong><br>
                                        <small>Kafka, Spark Streaming, Complex Event Processing</small>
                                    </div>
                                </div>
                                <div class="priority-item">
                                    <div class="priority-level priority-high"></div>
                                    <div>
                                        <strong>Advanced GenAI & LLM Operations</strong><br>
                                        <small>Fine-tuning, RAG systems, prompt engineering</small>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-bottom: 25px;">
                                <h4 style="color: #ff9800; margin-bottom: 15px;">⚡ 2028-2029 (Important)</h4>
                                <div class="priority-item">
                                    <div class="priority-level priority-medium"></div>
                                    <div>
                                        <strong>Explainable AI & Ethical Frameworks</strong><br>
                                        <small>SHAP, LIME, bias detection, fairness metrics</small>
                                    </div>
                                </div>
                                <div class="priority-item">
                                    <div class="priority-level priority-medium"></div>
                                    <div>
                                        <strong>Domain Specialization</strong><br>
                                        <small>Healthcare, climate, finance-specific AI applications</small>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h4 style="color: #2196f3; margin-bottom: 15px;">🔬 2029-2030 (Emerging)</h4>
                                <div class="priority-item">
                                    <div class="priority-level priority-low"></div>
                                    <div>
                                        <strong>Quantum ML & Edge Computing</strong><br>
                                        <small>Quantum algorithms, TinyML, IoT analytics</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Career Opportunities -->
                        <div class="trend-card opportunities-card">
                            <h3><span class="icon">🚀</span>Emerging Career Paths</h3>
                            
                            <div style="margin-bottom: 25px;">
                                <h4 style="color: #667eea; margin-bottom: 15px;">🎯 High-Growth Roles 2026-2030</h4>
                                <ul class="skill-list">
                                    <li class="skill-item">
                                        <span class="skill-name">AI Product Manager</span>
                                        <span class="growth-badge growth-high">+150%</span>
                                    </li>
                                    <li class="skill-item">
                                        <span class="skill-name">MLOps Platform Engineer</span>
                                        <span class="growth-badge growth-high">+120%</span>
                                    </li>
                                    <li class="skill-item">
                                        <span class="skill-name">AI Ethics Specialist</span>
                                        <span class="growth-badge growth-medium">+300%</span>
                                    </li>
                                    <li class="skill-item">
                                        <span class="skill-name">Real-time Analytics Engineer</span>
                                        <span class="growth-badge growth-medium">+90%</span>
                                    </li>
                                </ul>
                            </div>

                            <div class="highlight-box">
                                <h4>💡 Strategic Career Advice</h4>
                                <p><strong>Generalists → Specialists:</strong> The market is shifting toward deep domain expertise. Pick your niche by 2027.<br><br>
                                <strong>Technical + Business:</strong> Data scientists who understand business strategy will command premium salaries.<br><br>
                                <strong>Ethical AI Leaders:</strong> As AI regulation increases, ethics expertise becomes invaluable.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="continue-btn" onclick="nextStep()">Continue to Skill Gap Analysis</button>
                </div>
            </div>

            <!-- Step 2: Enhanced Skill Analysis - Updated with Emerging Skills -->
            <div id="step2" class="content-card" style="display: none;">
                <h3 style="margin-bottom: 30px; color: #333; text-align: center;">Skill Gap Analysis</h3>
                
                <!-- Resume Upload and Skill Rating Section - Modified Layout -->
                <div class="skill-analysis-container">
                    <!-- Resume Upload - First Row -->
                    <div class="resume-upload-section" id="resumeUpload" onclick="handleResumeUpload()">
                        <div class="upload-icon" id="uploadIcon">📄</div>
                        <div class="upload-title" id="uploadTitle">Upload Your Resume</div>
                        <div class="upload-subtitle" id="uploadSubtitle">PDF, DOC, or DOCX format • Max 5MB</div>
                        <button type="button" class="upload-btn" id="uploadBtn">Choose File</button>
                        <input type="file" id="resumeFile" accept=".pdf,.doc,.docx" style="display: none;">
                    </div>

                    <!-- Skill Rating - Second Row with Horizontal Design and Emerging Skills -->
                    <div class="skill-rating-section">
                        <div class="skill-rating-header">
                            <h4 style="color: #333; margin-bottom: 10px;">Rate Your Current Skills</h4>
                            <p style="color: #6c757d; font-size: 14px;">Rate yourself from 0 (no experience) to 5 (expert level)</p>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">🤖</div>
                                Prompt Engineering & GenAI
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="prompt-engineering">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="prompt-engineering-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">🧠</div>
                                TensorFlow & PyTorch
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="tensorflow-pytorch">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="tensorflow-pytorch-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">🔧</div>
                                MLOps & CI/CD Pipelines
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="mlops-cicd">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="mlops-cicd-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">🐍</div>
                                Python Programming
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="python">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="python-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">🗄️</div>
                                SQL & Data Warehousing
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="sql-warehousing">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="sql-warehousing-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">📊</div>
                                Data Visualization Tools
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="data-visualization">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="data-visualization-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">📈</div>
                                R Programming
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="r-programming">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="r-programming-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">🎯</div>
                                Scikit-learn
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="scikit-learn">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="scikit-learn-label">Not rated</span>
                            </div>
                        </div>

                        <div class="skill-rating-item">
                            <div class="skill-name-rating">
                                <div class="skill-icon">☁️</div>
                                Cloud Platforms (AWS/GCP/Azure)
                            </div>
                            <div class="rating-container">
                                <div class="rating-stars" data-skill="cloud-platforms">
                                    <span class="rating-star" data-rating="0">0</span>
                                    <span class="rating-star" data-rating="1">1</span>
                                    <span class="rating-star" data-rating="2">2</span>
                                    <span class="rating-star" data-rating="3">3</span>
                                    <span class="rating-star" data-rating="4">4</span>
                                    <span class="rating-star" data-rating="5">5</span>
                                </div>
                                <span class="rating-label" id="cloud-platforms-label">Not rated</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="generate-analysis-btn" id="generateAnalysisBtn" onclick="generateSkillComparison()" disabled>
                    📊 Generate Skills Comparison
                </button>

                <!-- Skills Comparison Results -->
                <div class="skills-comparison" id="skillsComparison">
                    <div class="comparison-header">
                        <div class="comparison-title">Skills Gap Analysis Results</div>
                        <div class="comparison-subtitle">Your skills vs. Industry requirements for <span id="jobTitleComparison"></span></div>
                    </div>

                    <!-- Skills Overview Cards -->
                    <div class="skills-overview">
                        <div class="skill-card critical">
                            <div class="skill-number critical" id="criticalSkillsCount">0</div>
                            <div class="skill-label">Missing Critical Skills</div>
                        </div>
                        <div class="skill-card improve">
                            <div class="skill-number improve" id="improveSkillsCount">0</div>
                            <div class="skill-label">Skills to Improve</div>
                        </div>
                        <div class="skill-card strong">
                            <div class="skill-number strong" id="strongSkillsCount">0</div>
                            <div class="skill-label">Strong Skills</div>
                        </div>
                    </div>

                    <!-- Missing Critical Skills Table -->
                    <div class="skills-table" id="criticalSkillsTable" style="display: none;">
                        <div class="table-header">
                            <div>Missing Critical Skills - Focus on these first</div>
                            <div>Priority</div>
                            <div>Market Demand</div>
                            <div>Growth Rate</div>
                            <div>Learning Direction</div>
                        </div>
                        <div id="criticalSkillsRows"></div>
                    </div>

                    <!-- Skills to Improve Table -->
                    <div class="skills-table" id="improveSkillsTable" style="display: none;">
                        <div class="table-header">
                            <div>Skills to Improve - Bridge the gap</div>
                            <div>Priority</div>
                            <div>Your Level</div>
                            <div>Required Level</div>
                            <div>Learning Direction</div>
                        </div>
                        <div id="improveSkillsRows"></div>
                    </div>

                    <!-- Strong Skills Table -->
                    <div class="skills-table" id="strongSkillsTable" style="display: none;">
                        <div class="table-header">
                            <div>Your Strong Skills - Leverage these</div>
                            <div>Priority</div>
                            <div>Your Level</div>
                            <div>Market Demand</div>
                            <div>Recommendation</div>
                        </div>
                        <div id="strongSkillsRows"></div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="back-btn" onclick="prevStep()">Back</button>
                    <button class="continue-btn" id="continueToRoadmapBtn" onclick="nextStep()" style="display: none;">Generate Learning Roadmap</button>
                </div>
            </div>

            <!-- Step 3: Dynamic Learning Roadmap Based on Skill Gap Analysis -->
            <div id="step3" class="content-card" style="display: none;">
                <h3 style="margin-bottom: 30px; color: #333;">📚 Personalized Learning Roadmap</h3>
                <p style="text-align: center; color: #666; margin-bottom: 30px;">
                    This roadmap is tailored based on your skill gap analysis and focuses on your missing/weak skills
                </p>
                
                <!-- Progress Overview -->
                <div class="progress-section">
                    <div class="progress-header">
                        <div class="progress-icon">📊</div>
                        <div class="progress-info">
                            <h3>Learning Progress</h3>
                        </div>
                    </div>
                    
                    <div class="progress-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalCompletedModules">0</span>
                            <span class="stat-label">Completed Modules</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="totalWeeks">18</span>
                            <span class="stat-label">Total Weeks</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="overallProgress">0%</span>
                            <span class="stat-label">Overall Progress</span>
                        </div>
                    </div>
                    
                    <div class="progress-bar-modern">
                        <div class="progress-fill-modern" id="overallProgressBar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Dynamic Learning Phases Container -->
                <div class="roadmap-grid" id="dynamicRoadmapGrid">
                    <!-- This will be populated dynamically based on skill gaps -->
                </div>

                <div style="text-align: center;">
                    <button class="back-btn" onclick="prevStep()">Back</button>
                    <button class="continue-btn" onclick="nextStep()">Practice Interview Skills</button>
                </div>
            </div>

            <!-- Step 4: Interview Practice -->
            <div id="step4" class="content-card" style="display: none;">
<div style="margin-top: 20px; text-align: center;">

</div>

                <h3 style="margin-bottom: 30px; color: #333;">AI-Powered Interview Practice</h3>
                <p id="questionText" style="text-align:center; font-size:1.2rem; margin-bottom:20px;">Loading question...</p>
    <div class="interview-practice">

<div class="voice-input" style="margin-top: 10px; text-align: left;">

</div>

                    <div class="camera-container" id="cameraContainer">
                        <span>📹 Camera will activate when you start practice</span>
                    </div>
                    <h4>Phone Screening Simulation</h4>
                    <p style="margin: 20px 0; color: #666;">Practice common interview questions with our AI interviewer. Get real-time feedback on your responses, body language, and communication skills.</p>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left;">
                        <h5>What to Expect:</h5>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>5-7 behavioral and technical questions</li>
                            <li>Real-time feedback on your responses</li>
                            <li>Analysis of speech patterns and confidence</li>
                            <li>Personalized improvement suggestions</li>
                        </ul>
                    </div>

                    <button id="startInterviewBtn" class="continue-btn" onclick="startInterview()">Start Interview Practice</button>
                    <div id="interviewSession" style="display: none; margin-top: 30px;">
                        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h5 style="color: #1976d2;">AI Interviewer:</h5>
                            <p id="interviewQuestion" style="font-size: 1.1rem; margin: 10px 0;">Tell me about yourself and why you're interested in this position.</p>
                            <button class="voice-input-btn">
                                <img src="mic.png" alt="Mic" style="width:50%; height:50%;">
                            </button>

                        </div>
                        <button class="continue-btn" onclick="nextQuestion()" style="margin-right: 10px;">Next Question</button>
                        <button class="back-btn" onclick="endInterview()">End Interview</button>

                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="back-btn" onclick="prevStep()">Back</button>
                    <button class="continue-btn" onclick="completePrediction()">Complete Analysis</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Track module completion state
        let moduleProgress = {};
        let totalModules = 0; // Will be set dynamically based on generated roadmap

        function toggleModule(checkbox, moduleId) {
            const isChecked = checkbox.classList.contains('checked');
            const module = checkbox.closest('.module');
            const moduleStatus = module.querySelector('.module-status');
            
            if (!isChecked) {
                // Mark as completed
                checkbox.classList.add('checked');
                module.classList.add('completed');
                moduleStatus.textContent = 'Completed';
                moduleStatus.className = 'module-status status-completed';
                moduleProgress[moduleId] = true;
                
                // Add completion animation
                module.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    module.style.transform = 'scale(1)';
                }, 200);
                
            } else {
                // Mark as not completed
                checkbox.classList.remove('checked');
                module.classList.remove('completed');
                moduleStatus.textContent = 'To Do';
                moduleStatus.className = 'module-status status-todo';
                moduleProgress[moduleId] = false;
            }
            
            // Update progress for the specific phase
            updatePhaseProgress(checkbox.closest('.roadmap-phase'));
            
            // Update overall progress
            updateOverallProgress();
        }

        function updatePhaseProgress(phaseElement) {
            const phaseNumber = phaseElement.dataset.phase;
            const modules = phaseElement.querySelectorAll('.module');
            const completedModules = phaseElement.querySelectorAll('.module.completed');
            
            const completedCount = completedModules.length;
            const totalCount = modules.length;
            const percentage = Math.round((completedCount / totalCount) * 100);
            
            // Update phase completion elements
            const phaseCompletedSpan = phaseElement.querySelector(`.phase-completed[data-phase="${phaseNumber}"]`);
            const phasePercentageSpan = phaseElement.querySelector(`.phase-percentage[data-phase="${phaseNumber}"]`);
            const progressBar = phaseElement.querySelector(`.completion-progress[data-phase="${phaseNumber}"]`);
            const completionText = phaseElement.querySelector(`.completion-text[data-phase="${phaseNumber}"]`);
            
            if (phaseCompletedSpan) phaseCompletedSpan.textContent = completedCount;
            if (phasePercentageSpan) phasePercentageSpan.textContent = percentage + '%';
            if (progressBar) progressBar.style.width = percentage + '%';
            
            // Update completion text based on progress
            if (completionText) {
                if (percentage === 0) {
                    completionText.textContent = '0% Complete • Not started';
                } else if (percentage === 100) {
                    completionText.textContent = '100% Complete • Phase finished! 🎉';
                    completionText.style.color = '#28a745';
                    completionText.style.fontWeight = 'bold';
                } else {
                    const remainingModules = totalCount - completedCount;
                    completionText.textContent = `${percentage}% Complete • ${remainingModules} modules remaining`;
                    completionText.style.color = '#667eea';
                    completionText.style.fontWeight = '600';
                }
            }
        }

        function updateOverallProgress() {
            const completedModulesCount = Object.values(moduleProgress).filter(Boolean).length;
            const overallPercentage = totalModules > 0 ? Math.round((completedModulesCount / totalModules) * 100) : 0;
            
            // Update overall progress elements
            document.getElementById('totalCompletedModules').textContent = completedModulesCount;
            document.getElementById('overallProgress').textContent = overallPercentage + '%';
            document.getElementById('overallProgressBar').style.width = overallPercentage + '%';
            
            // Update progress bar color based on completion
            const progressBar = document.getElementById('overallProgressBar');
            if (overallPercentage >= 75) {
                progressBar.style.background = 'linear-gradient(90deg, #28a745, #20c997)';
            } else if (overallPercentage >= 50) {
                progressBar.style.background = 'linear-gradient(90deg, #ffc107, #fd7e14)';
            } else {
                progressBar.style.background = 'linear-gradient(90deg, #00f2fe, #4facfe)';
            }
            
            // Show celebration animation when 100% complete
            if (overallPercentage === 100) {
                showCompletionCelebration();
            }
        }

        function showCompletionCelebration() {
            // Create celebration overlay
            const celebration = document.createElement('div');
            celebration.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                            background: rgba(0,0,0,0.8); display: flex; align-items: center; 
                            justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease;">
                    <div style="background: white; border-radius: 20px; padding: 40px; 
                                text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                                animation: bounceIn 0.5s ease;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">🎉</div>
                        <h2 style="color: #28a745; margin-bottom: 15px;">Congratulations!</h2>
                        <p style="font-size: 1.2rem; color: #666; margin-bottom: 30px;">
                            You've completed your entire learning roadmap!<br>
                            You're now ready to apply for your target role.
                        </p>
                        <button onclick="this.closest('div').remove()" 
                                style="background: #28a745; color: white; border: none; 
                                    padding: 15px 30px; border-radius: 8px; font-size: 1.1rem; 
                                    cursor: pointer; font-weight: bold;">
                            Continue to Interview Practice
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(celebration);
            
            // Remove after 5 seconds if not manually closed
            setTimeout(() => {
                if (celebration.parentNode) {
                    celebration.remove();
                }
            }, 5000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @keyframes bounceIn {
                0% { transform: scale(0.3); opacity: 0; }
                50% { transform: scale(1.05); }
                70% { transform: scale(0.9); }
                100% { transform: scale(1); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        /*previous*/
        let currentStep = 1;
        let jobData = {};
        let skillRatings = {};
        let resumeUploaded = false;
        let interviewQuestions = [
            "Tell me about yourself and why you're interested in this position.",
            "What experience do you have with Python programming?",
            "How would you approach a machine learning project from start to finish?",
            "Describe a challenging data analysis problem you've solved.",
            "How do you stay updated with the latest technology trends?",
            "What are the steps in making a decision tree?",
            "What is logistic regression?"
        ];
        let currentQuestionIndex = 0;

        // Updated industry requirements with emerging skills
        const industryRequirements = {
            'prompt-engineering': { required: 4, demand: 92, growth: 29, priority: 'high' },
            'tensorflow-pytorch': { required: 4, demand: 85, growth: 22, priority: 'high' },
            'mlops-cicd': { required: 4, demand: 78, growth: 20, priority: 'high' },
            'python': { required: 4, demand: 89, growth: 18, priority: 'high' },
            'sql-warehousing': { required: 3, demand: 76, growth: 14, priority: 'medium' },
            'data-visualization': { required: 3, demand: 71, growth: 12, priority: 'medium' },
            'r-programming': { required: 2, demand: 58, growth: 8, priority: 'low' },
            'scikit-learn': { required: 4, demand: 82, growth: 16, priority: 'high' },
            'cloud-platforms': { required: 3, demand: 74, growth: 25, priority: 'medium' }
        };

        const skillLabels = {0: 'Beginner', 1: 'Novice', 2: 'Basic', 3: 'Intermediate', 4: 'Advanced', 5: 'Expert'};

        // Skill names mapping
        const skillNames = {
            'prompt-engineering': 'Prompt Engineering & GenAI',
            'tensorflow-pytorch': 'TensorFlow & PyTorch',
            'mlops-cicd': 'MLOps & CI/CD Pipelines',
            'python': 'Python Programming',
            'sql-warehousing': 'SQL & Data Warehousing',
            'data-visualization': 'Data Visualization Tools',
            'r-programming': 'R Programming',
            'scikit-learn': 'Scikit-learn',
            'cloud-platforms': 'Cloud Platforms (AWS/GCP/Azure)'
        };

        // Skill icons mapping
        const skillIcons = {
            'prompt-engineering': '🤖',
            'tensorflow-pytorch': '🧠',
            'mlops-cicd': '🔧',
            'python': '🐍',
            'sql-warehousing': '🗄️',
            'data-visualization': '📊',
            'r-programming': '📈',
            'scikit-learn': '🎯',
            'cloud-platforms': '☁️'
        };

        document.getElementById('jobForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Store job data
            jobData = {
                desiredJob: document.getElementById('desiredJob').value,
                industry: document.getElementById('industry').value,
                experience: document.getElementById('experience').value,
                location: document.getElementById('location').value
            };

            // Update job title in trend analysis
            document.getElementById('jobTitle').textContent = jobData.desiredJob;
            document.getElementById('jobTitleComparison').textContent = jobData.desiredJob;

            // Show process page
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('processPage').style.display = 'block';
            
            // Initialize charts
            initializeCharts();
        });

        // Trend section switching functionality
        function showTrendSection(sectionName) {
            // Hide all trend sections
            const sections = document.querySelectorAll('.trend-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active class from all trend tabs
            const tabs = document.querySelectorAll('.trend-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Initialize charts when trends are shown
        function initializeCharts() {
            setTimeout(() => {
                // Growth Chart
                const growthCtx = document.getElementById('growthChart').getContext('2d');
                new Chart(growthCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Prompt Eng.', 'TensorFlow', 'MLOps', 'Python', 'SQL', 'Data Viz'],
                        datasets: [{
                            label: 'Growth Rate (%)',
                            data: [29, 22, 20, 18, 14, 12],
                            backgroundColor: [
                                '#e53e3e',
                                '#FF6384',
                                '#36A2EB',
                                '#FFCE56',
                                '#4BC0C0',
                                '#9966FF'
                            ],
                            borderRadius: 8,
                            borderSkipped: false,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.y + '% growth rate';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                },
                                grid: {
                                    color: 'rgba(0,0,0,0.1)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });

                // Tech Stack Chart
                const techStackCtx = document.getElementById('techStackChart').getContext('2d');
                new Chart(techStackCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Python/R', 'SQL', 'ML Frameworks', 'Cloud Platforms', 'Visualization', 'MLOps'],
                        datasets: [{
                            data: [25, 20, 18, 15, 12, 10],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#4facfe',
                                '#00f2fe',
                                '#fa709a',
                                '#fee140'
                            ],
                            borderWidth: 3,
                            borderColor: '#fff',
                            hoverBorderWidth: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.label + ': ' + context.parsed + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }, 100);
        }

        // Resume upload functionality
        function handleResumeUpload() {
            document.getElementById('resumeFile').click();
        }

        document.getElementById('resumeFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                resumeUploaded = true;
                const uploadSection = document.getElementById('resumeUpload');
                const uploadIcon = document.getElementById('uploadIcon');
                const uploadTitle = document.getElementById('uploadTitle');
                const uploadSubtitle = document.getElementById('uploadSubtitle');
                const uploadBtn = document.getElementById('uploadBtn');
                
                uploadSection.classList.add('uploaded');
                uploadIcon.textContent = '✅';
                uploadIcon.classList.add('uploaded');
                uploadTitle.textContent = 'Resume Uploaded Successfully';
                uploadSubtitle.textContent = file.name + ' • ' + (file.size / 1024 / 1024).toFixed(2) + ' MB';
                uploadBtn.textContent = 'Change File';
                
                checkGenerateButtonState();
            }
        });

        // Skill rating functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('rating-star')) {
                const rating = parseInt(e.target.dataset.rating);
                const skillContainer = e.target.closest('.rating-stars');
                const skill = skillContainer.dataset.skill;
                const label = document.getElementById(skill + '-label');
                
                // Update skill ratings
                skillRatings[skill] = rating;
                
                // Update visual state
                const stars = skillContainer.querySelectorAll('.rating-star');
                stars.forEach((star, index) => {
                    if (index <= rating) {
                        star.classList.add('active');
                    } else {
                        star.classList.remove('active');
                    }
                });
                
                // Update label
                label.textContent = skillLabels[rating];
                
                checkGenerateButtonState();
            }
        });

        function checkGenerateButtonState() {
            const ratedSkills = Object.keys(skillRatings).length;
            const generateBtn = document.getElementById('generateAnalysisBtn');
            
            if (resumeUploaded && ratedSkills >= 3) {
                generateBtn.disabled = false;
            } else {
                generateBtn.disabled = true;
            }
        }

        function generateSkillComparison() {
            // Show the comparison results
            document.getElementById('skillsComparison').style.display = 'block';
            document.getElementById('continueToRoadmapBtn').style.display = 'inline-block';
            
            // Analyze skills and categorize them
            let criticalSkills = [];
            let improveSkills = [];
            let strongSkills = [];
            
            Object.keys(industryRequirements).forEach(skill => {
                const userRating = skillRatings[skill] || 0;
                const required = industryRequirements[skill].required;
                
                if (userRating === 0) {
                    criticalSkills.push(skill);
                } else if (userRating < required) {
                    improveSkills.push(skill);
                } else {
                    strongSkills.push(skill);
                }
            });

            // Store for roadmap generation
            window.skillGapAnalysis = {
                critical: criticalSkills,
                improve: improveSkills,
                strong: strongSkills
            };

            // Update overview cards
            document.getElementById('criticalSkillsCount').textContent = criticalSkills.length;
            document.getElementById('improveSkillsCount').textContent = improveSkills.length;
            document.getElementById('strongSkillsCount').textContent = strongSkills.length;

            // Generate skill tables
            generateSkillTable('critical', criticalSkills);
            generateSkillTable('improve', improveSkills);
            generateSkillTable('strong', strongSkills);

            // Scroll to results
            document.getElementById('skillsComparison').scrollIntoView({ behavior: 'smooth' });
        }

        function generateSkillTable(type, skills) {
            if (skills.length === 0) return;
            
            const table = document.getElementById(type + 'SkillsTable');
            const rowsContainer = document.getElementById(type + 'SkillsRows');
            
            table.style.display = 'block';
            rowsContainer.innerHTML = '';

            const criticalStudyDirections = {
                'prompt-engineering': 'Master prompt design patterns, fine-tuning, and RAG systems',
                'tensorflow-pytorch': 'Start with basic neural networks, then move to CNNs and RNNs',
                'mlops-cicd': 'Learn Docker, Kubernetes, and ML pipeline automation',
                'python': 'Master core syntax, then explore automation and scripting',
                'sql-warehousing': 'Learn complex queries, ETL processes, and data modeling',
                'data-visualization': 'Start with Matplotlib/Seaborn, then move to interactive tools',
                'r-programming': 'Focus on statistical analysis and data manipulation',
                'scikit-learn': 'Master supervised/unsupervised learning algorithms',
                'cloud-platforms': 'Familiarize with core cloud ML services and deployment'
            };

            const improveStudyDirections = {
                'prompt-engineering': 'Practice advanced prompt engineering techniques and LLM optimization',
                'tensorflow-pytorch': 'Build complex deep learning architectures and custom layers',
                'mlops-cicd': 'Implement end-to-end ML pipelines with monitoring and versioning',
                'python': 'Build end-to-end applications and explore advanced libraries',
                'sql-warehousing': 'Optimize queries and design scalable data architectures',
                'data-visualization': 'Create interactive dashboards and storytelling with data',
                'r-programming': 'Apply advanced statistical modeling and machine learning',
                'scikit-learn': 'Implement custom estimators and advanced ensemble methods',
                'cloud-platforms': 'Deploy production ML systems with auto-scaling and monitoring'
            };

            const strongStudyDirections = {
                'prompt-engineering': 'Lead GenAI initiatives and mentor others in prompt engineering',
                'tensorflow-pytorch': 'Contribute to research projects and teach advanced concepts',
                'mlops-cicd': 'Design enterprise-grade ML infrastructure and best practices',
                'python': 'Contribute to open-source projects or mentor junior developers',
                'sql-warehousing': 'Architect data solutions and optimize enterprise databases',
                'data-visualization': 'Create advanced interactive visualizations and teach others',
                'r-programming': 'Lead statistical analysis projects and research initiatives',
                'scikit-learn': 'Develop custom ML solutions and contribute to the library',
                'cloud-platforms': 'Design multi-cloud strategies and lead cloud transformations'
            };

            skills.forEach(skill => {
                const req = industryRequirements[skill];
                const userRating = skillRatings[skill] || 0;
                
                let priorityClass = '';
                let priorityText = '';
                
                if (req.priority === 'high') {
                    priorityClass = 'priority-high';
                    priorityText = 'High';
                } else if (req.priority === 'medium') {
                    priorityClass = 'priority-medium';
                    priorityText = 'Medium';
                } else {
                    priorityClass = 'priority-low';
                    priorityText = 'Low';
                }
                
                let content = '';
                
                if (type === 'critical') {
                    content = `
                        <div class="skill-row">
                            <div class="skill-info">
                                <div class="skill-icon">${skillIcons[skill]}</div>
                                ${skillNames[skill]}
                            </div>
                            <div class="priority-badge ${priorityClass}">${priorityText}</div>
                            <div class="demand-percent">${req.demand}%</div>
                            <div class="growth-rate">+${req.growth}%</div>
                            <div class="study-direction">${criticalStudyDirections[skill]}</div>
                        </div>
                    `;
                } else if (type === 'improve') {
                    content = `
                        <div class="skill-row">
                            <div class="skill-info">
                                <div class="skill-icon">${skillIcons[skill]}</div>
                                ${skillNames[skill]}
                            </div>
                            <div class="priority-badge ${priorityClass}">${priorityText}</div>
                            <div class="demand-percent">${userRating}/5</div>
                            <div class="growth-rate">${req.required}/5</div>
                            <div class="study-direction">${improveStudyDirections[skill]}</div>
                        </div>
                    `;
                } else if (type === 'strong') {
                    content = `
                        <div class="skill-row">
                            <div class="skill-info">
                                <div class="skill-icon">${skillIcons[skill]}</div>
                                ${skillNames[skill]}
                            </div>
                            <div class="priority-badge ${priorityClass}">${priorityText}</div>
                            <div class="demand-percent">${userRating}/5</div>
                            <div class="growth-rate">${req.demand}%</div>
                            <div class="study-direction">${strongStudyDirections[skill]}</div>
                        </div>
                    `;
                }
                
                rowsContainer.innerHTML += content;
            });
        }

        // Dynamic Roadmap Generation Based on Skill Gap Analysis (WITHOUT Portfolio Phase)
        function generateDynamicRoadmap() {
            const skillGaps = window.skillGapAnalysis;
            if (!skillGaps) return;

            const roadmapContainer = document.getElementById('dynamicRoadmapGrid');
            roadmapContainer.innerHTML = '';

            let phaseNumber = 1;
            let totalModulesCount = 0;

            // Phase 1: Critical Skills (Must Have)
            if (skillGaps.critical.length > 0) {
                const criticalPhase = generateRoadmapPhase(
                    phaseNumber++,
                    'Critical Skills Foundation',
                    '6-8 weeks',
                    'Master the essential skills you\'re currently missing - these are crucial for the role.',
                    skillGaps.critical,
                    'critical'
                );
                roadmapContainer.appendChild(criticalPhase);
                totalModulesCount += skillGaps.critical.length;
            }

            // Phase 2: Skills to Improve (Level Up)
            if (skillGaps.improve.length > 0) {
                const improvePhase = generateRoadmapPhase(
                    phaseNumber++,
                    'Skill Enhancement',
                    '4-6 weeks',
                    'Bridge the gap in skills where you have some experience but need to reach industry standards.',
                    skillGaps.improve,
                    'improve'
                );
                roadmapContainer.appendChild(improvePhase);
                totalModulesCount += skillGaps.improve.length;
            }

            // Phase 3: Advanced Applications (if user has some strong skills)
            if (skillGaps.strong.length > 0) {
                const advancedPhase = generateRoadmapPhase(
                    phaseNumber++,
                    'Advanced Applications',
                    '4-5 weeks',
                    'Leverage your strong skills and apply them to advanced, real-world projects.',
                    skillGaps.strong,
                    'advanced'
                );
                roadmapContainer.appendChild(advancedPhase);
                totalModulesCount += skillGaps.strong.length;
            }

            // Portfolio Phase REMOVED - No longer generated

            // Update total modules and weeks (adjusted without portfolio phase)
            totalModules = totalModulesCount;
            const totalWeeks = Math.max(10, skillGaps.critical.length * 2 + skillGaps.improve.length * 1.5 + (skillGaps.strong.length > 0 ? 4 : 0));
            document.getElementById('totalWeeks').textContent = Math.ceil(totalWeeks);

            // Initialize module progress tracking
            moduleProgress = {};
            document.querySelectorAll('[data-module]').forEach(module => {
                const moduleId = module.dataset.module;
                moduleProgress[moduleId] = false;
            });

            updateOverallProgress();
        }

        function generateRoadmapPhase(phaseNum, title, duration, description, skills, type) {
            const phase = document.createElement('div');
            phase.className = 'roadmap-phase';
            phase.dataset.phase = phaseNum;

            const skillModules = skills.map(skill => generateSkillModule(skill, type)).join('');

            phase.innerHTML = `
                <div class="phase-header">
                    <div class="phase-number">${phaseNum}</div>
                    <div class="phase-info">
                        <h3>${title}</h3>
                        <span class="phase-duration">${duration}</span>
                    </div>
                </div>
                
                <p class="phase-description">${description}</p>

                <div class="learning-modules">
                    ${skillModules}
                </div>

                <div class="phase-completion">
                    <div class="completion-stats">
                        <span class="modules-count">
                            <span class="phase-completed" data-phase="${phaseNum}">0</span>/${skills.length} modules completed
                        </span>
                        <span class="phase-percentage" data-phase="${phaseNum}">0%</span>
                    </div>
                    <div class="completion-bar">
                        <div class="completion-progress" data-phase="${phaseNum}" style="width: 0%"></div>
                    </div>
                    <div class="completion-text" data-phase="${phaseNum}">0% Complete • Not started</div>
                </div>
            `;

            return phase;
        }

        function generateSkillModule(skill, type) {
            const skillConfig = getSkillModuleConfig(skill, type);
            const moduleId = `${skill}-${type}`;

            return `
                <div class="module" data-module="${moduleId}">
                    <div class="module-header">
                        <div class="module-title">
                            <div class="module-checkbox" onclick="toggleModule(this, '${moduleId}')"></div>
                            ${skillIcons[skill]} ${skillNames[skill]}
                        </div>
                        <span class="module-status status-todo">To Do</span>
                    </div>
                    <div class="module-content">
                        ${skillConfig.description}
                    </div>
                    <div class="module-resources">
                        ${skillConfig.resources.map(resource => 
                            `<a href="${resource.url}" target="_blank" class="resource-tag ${resource.type}">${resource.name}</a>`
                        ).join('')}
                    </div>
                </div>
            `;
        }

        function getSkillModuleConfig(skill, type) {
            const configs = {
                'prompt-engineering': {
                    critical: {
                        description: 'Learn prompt design patterns, understand LLM capabilities, and practice with ChatGPT, Claude, and other AI models.',
                        resources: [
                            { name: 'Prompt Engineering Guide', url: 'https://www.promptingguide.ai/', type: 'tag-course' },
                            { name: 'OpenAI Cookbook', url: 'https://cookbook.openai.com/', type: 'tag-tutorial' },
                            { name: 'Practice Prompts', url: 'https://github.com/f/awesome-chatgpt-prompts', type: 'tag-practice' }
                        ]
                    },
                    improve: {
                        description: 'Advanced prompt engineering techniques, fine-tuning, and building RAG systems.',
                        resources: [
                            { name: 'Advanced Prompting', url: 'https://platform.openai.com/docs/guides/prompt-engineering', type: 'tag-course' },
                            { name: 'RAG Tutorial', url: 'https://python.langchain.com/docs/tutorials/rag/', type: 'tag-tutorial' },
                            { name: 'LLM Projects', url: 'https://github.com/practical-nlp/practical-nlp', type: 'tag-practice' }
                        ]
                    },
                    advanced: {
                        description: 'Lead GenAI initiatives, create custom AI solutions, and mentor others.',
                        resources: [
                            { name: 'Enterprise AI', url: 'https://cloud.google.com/ai/generative-ai', type: 'tag-course' },
                            { name: 'AI Research', url: 'https://arxiv.org/list/cs.AI/recent', type: 'tag-article' },
                            { name: 'Community', url: 'https://huggingface.co/spaces', type: 'tag-practice' }
                        ]
                    }
                },
                'python': {
                    critical: {
                        description: 'Master Python syntax, data structures, OOP concepts, and essential libraries like NumPy and Pandas.',
                        resources: [
                            { name: 'Python.org Tutorial', url: 'https://docs.python.org/3/tutorial/', type: 'tag-course' },
                            { name: 'Automate Boring Stuff', url: 'https://automatetheboringstuff.com/', type: 'tag-book' },
                            { name: 'Python Exercises', url: 'https://www.hackerrank.com/domains/python', type: 'tag-practice' }
                        ]
                    },
                    improve: {
                        description: 'Build complex applications, learn advanced Python patterns, and explore frameworks.',
                        resources: [
                            { name: 'Real Python', url: 'https://realpython.com/', type: 'tag-tutorial' },
                            { name: 'Python Patterns', url: 'https://python-patterns.guide/', type: 'tag-article' },
                            { name: 'Project Ideas', url: 'https://github.com/karan/Projects', type: 'tag-practice' }
                        ]
                    },
                    advanced: {
                        description: 'Contribute to open-source projects, optimize performance, and mentor others.',
                        resources: [
                            { name: 'CPython Dev', url: 'https://devguide.python.org/', type: 'tag-course' },
                            { name: 'Performance Tips', url: 'https://wiki.python.org/moin/PythonSpeed/PerformanceTips', type: 'tag-article' },
                            { name: 'Open Source', url: 'https://github.com/trending/python', type: 'tag-practice' }
                        ]
                    }
                }
                // Add more skill configurations as needed...
            };

            // Default configuration if specific skill not found
            const defaultConfig = {
                description: `Learn and practice ${skillNames[skill]} through hands-on projects and real-world applications.`,
                resources: [
                    { name: 'Online Course', url: '#', type: 'tag-course' },
                    { name: 'Documentation', url: '#', type: 'tag-tutorial' },
                    { name: 'Practice Projects', url: '#', type: 'tag-practice' }
                ]
            };

            return configs[skill]?.[type] || defaultConfig;
        }

        function nextStep() {
            if (currentStep < 4) {
                // Generate dynamic roadmap when entering step 3
                if (currentStep === 2 && window.skillGapAnalysis) {
                    generateDynamicRoadmap();
                }
                
                document.getElementById(`step${currentStep}`).style.display = 'none';
                currentStep++;
                document.getElementById(`step${currentStep}`).style.display = 'block';
                
                updateStepIndicator();
                updateProgressBar();
                updateStepTitle();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                document.getElementById(`step${currentStep}`).style.display = 'none';
                currentStep--;
                document.getElementById(`step${currentStep}`).style.display = 'block';
                
                updateStepIndicator();
                updateProgressBar();
                updateStepTitle();
            }
        }

        function updateStepIndicator() {
            document.querySelectorAll('.step').forEach((step, index) => {
                const stepNum = index + 1;
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
        }

        function updateProgressBar() {
            const progress = (currentStep / 4) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateStepTitle() {
            const titles = ['Trend Analysis', 'Skill Gap Analysis', 'Learning Roadmap', 'Interview Practice'];
            document.getElementById('stepTitle').textContent = titles[currentStep - 1];
        }

        function startInterview() {
            document.getElementById('startInterviewBtn').style.display = 'none';
            document.getElementById('interviewSession').style.display = 'block';
            document.getElementById('cameraContainer').innerHTML = '<span style="color: #4caf50;">🟢 Camera Active - Interview Recording</span>';
            currentQuestionIndex = 0;
            document.getElementById('interviewQuestion').textContent = interviewQuestions[currentQuestionIndex];
        }

        function nextQuestion() {
            if (currentQuestionIndex < interviewQuestions.length - 1) {
                currentQuestionIndex++;
                document.getElementById('interviewQuestion').textContent = interviewQuestions[currentQuestionIndex];
            } else {
                alert('Interview completed! You\'ve answered all questions. Great job!');
                endInterview();
            }
        }

        function endInterview() {
            document.getElementById('startInterviewBtn').style.display = 'block';
            document.getElementById('interviewSession').style.display = 'none';
            document.getElementById('cameraContainer').innerHTML = '<span>📹 Camera will activate when you start practice</span>';
            
            // Show interview feedback
            showInterviewFeedback();
        }

        function showInterviewFeedback() {
            const feedbackHtml = `
                <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 10px; padding: 20px; margin: 20px 0;">
                    <h4 style="color: #2e7d32; margin-bottom: 15px;">🎉 Interview Feedback</h4>
                    <div style="margin-bottom: 10px;">
                        <strong>Overall Performance:</strong> <span style="color: #4caf50;">Excellent (8.5/10)</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>Communication Skills:</strong> <span style="color: #4caf50;">Strong</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>Technical Knowledge:</strong> <span style="color: #ff9800;">Good - Room for improvement</span>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <strong>Confidence Level:</strong> <span style="color: #4caf50;">High</span>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h5 style="color: #333; margin-bottom: 10px;">Recommendations:</h5>
                        <ul style="color: #666; padding-left: 20px;">
                            <li>Practice more technical examples from your experience</li>
                            <li>Prepare specific metrics and achievements to share</li>
                            <li>Research the company and role more thoroughly</li>
                        </ul>
                    </div>
                </div>
            `;
            
            const interviewPractice = document.querySelector('.interview-practice');
            
            // Remove existing feedback if any
            const existingFeedback = interviewPractice.querySelector('.interview-feedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }
            
            // Add new feedback
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = 'interview-feedback';
            feedbackDiv.innerHTML = feedbackHtml;
            interviewPractice.appendChild(feedbackDiv);
        }

        function completePrediction() {
            // Generate dynamic roadmap summary for completion (without portfolio phase)
            const skillGaps = window.skillGapAnalysis || { critical: [], improve: [], strong: [] };
            const totalSkillsToLearn = skillGaps.critical.length + skillGaps.improve.length;
            const estimatedWeeks = Math.max(10, skillGaps.critical.length * 2 + skillGaps.improve.length * 1.5 + (skillGaps.strong.length > 0 ? 4 : 0));
            
            // Show completion summary
            const completionHtml = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000;">
                    <div style="background: white; border-radius: 20px; padding: 40px; max-width: 600px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.3);">
                        <h2 style="color: #4caf50; margin-bottom: 20px;">🎉 Analysis Complete!</h2>
                        <p style="font-size: 1.1rem; color: #666; margin-bottom: 30px;">
                            Congratulations! You've completed your comprehensive skill gap analysis for <strong>${jobData.desiredJob}</strong>.
                        </p>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; text-align: left;">
                            <h4 style="margin-bottom: 15px; color: #333;">Your Personalized Journey Summary:</h4>
                            <div style="margin-bottom: 10px;">✅ Market trends analyzed</div>
                            <div style="margin-bottom: 10px;">✅ ${Object.keys(skillRatings).length} skills assessed</div>
                            <div style="margin-bottom: 10px;">✅ ${skillGaps.critical.length} critical skills identified</div>
                            <div style="margin-bottom: 10px;">✅ ${skillGaps.improve.length} skills marked for improvement</div>
                            <div style="margin-bottom: 10px;">✅ Focused learning roadmap created</div>
                            <div style="margin-bottom: 10px;">✅ Interview skills practiced</div>
                        </div>
                        <div style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h4 style="margin-bottom: 10px;">Estimated Timeline to Goal:</h4>
                            <div style="font-size: 1.5rem; font-weight: bold;">${Math.ceil(estimatedWeeks)} weeks</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">With consistent learning (10-15 hours/week)</div>
                            <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">Focusing on ${totalSkillsToLearn} priority skills</div>
                        </div>
                        <div style="display: flex; gap: 15px; justify-content: center;">
                            <button onclick="downloadRoadmap()" style="background: #4caf50; color: white; border: none; padding: 15px 25px; border-radius: 8px; cursor: pointer; font-weight: bold;">Download Roadmap</button>
                            <button onclick="startOver()" style="background: #667eea; color: white; border: none; padding: 15px 25px; border-radius: 8px; cursor: pointer; font-weight: bold;">Start New Analysis</button>
                            <button onclick="closeCompletion()" style="background: #6c757d; color: white; border: none; padding: 15px 25px; border-radius: 8px; cursor: pointer;">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', completionHtml);
        }

        function downloadRoadmap() {
            const skillGaps = window.skillGapAnalysis || { critical: [], improve: [], strong: [] };
            
            // Create dynamic roadmap content based on actual skill analysis (without portfolio)
            let criticalSkillsList = '';
            let improveSkillsList = '';
            let strongSkillsList = '';
            
            skillGaps.critical.forEach(skill => {
                criticalSkillsList += `- ${skillNames[skill]} (Priority: ${industryRequirements[skill].priority})\n`;
            });
            
            skillGaps.improve.forEach(skill => {
                const userRating = skillRatings[skill] || 0;
                const required = industryRequirements[skill].required;
                improveSkillsList += `- ${skillNames[skill]} (Current: ${userRating}/5, Required: ${required}/5)\n`;
            });
            
            skillGaps.strong.forEach(skill => {
                const userRating = skillRatings[skill] || 0;
                strongSkillsList += `- ${skillNames[skill]} (Your Level: ${userRating}/5)\n`;
            });

            const totalSkillsToLearn = skillGaps.critical.length + skillGaps.improve.length;
            const estimatedWeeks = Math.max(10, skillGaps.critical.length * 2 + skillGaps.improve.length * 1.5 + (skillGaps.strong.length > 0 ? 4 : 0));

            const roadmapContent = `
SKILL GAP PREDICTOR - PERSONALIZED LEARNING ROADMAP
==================================================

Target Role: ${jobData.desiredJob}
Industry: ${jobData.industry}
Experience Level: ${jobData.experience}
Location: ${jobData.location}
Analysis Date: ${new Date().toLocaleDateString()}

SKILLS ANALYSIS SUMMARY
======================

MISSING CRITICAL SKILLS (Focus First):
${criticalSkillsList || 'None identified - Great job!'}

SKILLS TO IMPROVE:
${improveSkillsList || 'None identified'}

YOUR STRONG SKILLS:
${strongSkillsList || 'Continue rating your skills to see results'}

PERSONALIZED LEARNING PHASES
============================

${skillGaps.critical.length > 0 ? `PHASE 1: Critical Skills Foundation (6-8 weeks)
Priority: Address missing critical skills
Focus Areas: ${skillGaps.critical.map(skill => skillNames[skill]).join(', ')}

${skillGaps.critical.map(skill => `
${skillNames[skill]}:
- Learn: ${getSkillModuleConfig(skill, 'critical').description}
- Time Investment: 8-10 hours/week
- Resources: Online courses, documentation, hands-on practice
`).join('')}
` : ''}

${skillGaps.improve.length > 0 ? `PHASE 2: Skill Enhancement (4-6 weeks)
Priority: Bridge gaps in existing skills
Focus Areas: ${skillGaps.improve.map(skill => skillNames[skill]).join(', ')}

${skillGaps.improve.map(skill => `
${skillNames[skill]}:
- Current Level: ${skillRatings[skill] || 0}/5
- Target Level: ${industryRequirements[skill].required}/5
- Learning Path: ${getSkillModuleConfig(skill, 'improve').description}
- Time Investment: 6-8 hours/week
`).join('')}
` : ''}

${skillGaps.strong.length > 0 ? `PHASE 3: Advanced Applications (4-5 weeks)
Priority: Leverage your strengths
Focus Areas: ${skillGaps.strong.map(skill => skillNames[skill]).join(', ')}

${skillGaps.strong.map(skill => `
${skillNames[skill]} (Strength):
- Current Level: ${skillRatings[skill] || 0}/5
- Advanced Focus: ${getSkillModuleConfig(skill, 'advanced').description}
- Time Investment: 4-6 hours/week
`).join('')}
` : ''}

KEY MILESTONES
=============
Week ${Math.ceil(skillGaps.critical.length * 2)}: Complete critical skills foundation
Week ${Math.ceil(skillGaps.critical.length * 2 + skillGaps.improve.length * 1.5)}: Complete skill enhancement phase
${skillGaps.strong.length > 0 ? `Week ${Math.ceil(estimatedWeeks - 4)}: Complete advanced applications phase\n` : ''}Week ${Math.ceil(estimatedWeeks)}: Ready for job applications

ESTIMATED TIMELINE: ${Math.ceil(estimatedWeeks)} weeks
PRIORITY SKILLS TO MASTER: ${totalSkillsToLearn}
RECOMMENDED STUDY TIME: 10-15 hours per week
SUCCESS PROBABILITY: High (based on your targeted skill assessment)

SKILL-SPECIFIC RESOURCES
=======================
${skillGaps.critical.concat(skillGaps.improve).map(skill => `
${skillNames[skill]}:
${getSkillModuleConfig(skill, skillGaps.critical.includes(skill) ? 'critical' : 'improve').resources.map(r => `- ${r.name}: ${r.url}`).join('\n')}
`).join('')}

NEXT STEPS
==========
1. Start with your highest priority missing skills: ${skillGaps.critical.map(skill => skillNames[skill]).join(', ') || 'Focus on improvement areas'}
2. Set up a daily learning schedule (2-3 hours/day)
3. Join relevant online communities and forums
4. Create projects to demonstrate your newly acquired skills
5. Schedule weekly progress reviews and adjust as needed

Generated by Skill Gap Predictor - Personalized for ${jobData.desiredJob}
Based on analysis of ${Object.keys(skillRatings).length} skills
Contact: support@skillgappredictor.com
            `;
            
            const blob = new Blob([roadmapContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${jobData.desiredJob.replace(/\s+/g, '_')}_Personalized_Skill_Gap_Roadmap.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function startOver() {
            location.reload();
        }

        function closeCompletion() {
            const modal = document.querySelector('[style*="position: fixed"]');
            if (modal) {
                modal.remove();
            }
        }

        // Add some interactive animations
        document.addEventListener('DOMContentLoaded', function() {
            // Animate progress bar on load
            setTimeout(() => {
                updateProgressBar();
            }, 500);
            
            // Add hover effects to rating stars
            document.querySelectorAll('.rating-star').forEach(star => {
                star.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1)';
                });
                
                star.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.transform = 'scale(1)';
                    }
                });
            });

            // Add file upload drag and drop functionality
            const uploadSection = document.getElementById('resumeUpload');
            
            uploadSection.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.borderColor = '#667eea';
                this.style.background = 'rgba(102, 126, 234, 0.1)';
            });
            
            uploadSection.addEventListener('dragleave', function(e) {
                e.preventDefault();
                if (!this.classList.contains('uploaded')) {
                    this.style.borderColor = '#dee2e6';
                    this.style.background = '#f8f9fa';
                }
            });
            
            uploadSection.addEventListener('drop', function(e) {
                e.preventDefault();
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const fileInput = document.getElementById('resumeFile');
                    fileInput.files = files;
                    fileInput.dispatchEvent(new Event('change'));
                }
            });
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' && currentStep < 4) {
                nextStep();
            } else if (e.key === 'ArrowLeft' && currentStep > 1) {
                prevStep();
            }
        });

        // Add practice interview button functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('practice-btn')) {
                const skillRow = e.target.closest('.skill-row');
                const skillName = skillRow.querySelector('.skill-info').textContent.trim();
                
                // Show practice modal or redirect to interview practice
                alert(`Starting interview practice for ${skillName}. This would typically open a targeted interview session focusing on this skill.`);
            }
        });

        // Add intersection observer for smooth animations
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.trend-card, .content-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            cards.forEach((card) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            });

            // Add staggered animation delay
            cards.forEach((card, index) => {
                card.style.transitionDelay = `${index * 0.1}s`;
            });
        });

        // Add smooth scrolling for better UX
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.trend-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Smooth scroll to top after tab change
                    setTimeout(() => {
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    }, 100);
                });
            });
        });
    </script>

<script>
// Fetch job availability from landing.json (for demonstration only)
async function checkJobAvailability(jobTitle) {
    const res = await fetch('./data/landing.json');
    const data = await res.json();
    return data.supported_jobs.some(job => job.title.toLowerCase() === jobTitle.toLowerCase() && job.forecast_available);
}

// Fetch trend data
async function loadTrendAnalysis() {
    const res = await fetch('./data/trend_analysis.json');
    const data = await res.json();
    console.log("Trend Analysis Data:", data);
    // TODO: Render dynamically instead of using hardcoded HTML
}

// Fetch skill gap data
async function loadSkillGap() {
    const res = await fetch('./data/skill_gap.json');
    const data = await res.json();
    console.log("Skill Gap Data:", data);
    // TODO: Use this to populate ratings/results dynamically
}

// Fetch roadmap data
async function loadRoadmap() {
    const res = await fetch('./data/roadmap.json');
    const data = await res.json();
    console.log("Roadmap Data:", data);
    // TODO: Populate the roadmap dynamically
}

// // Fetch AI Interview data
// async function loadAIInterview() {
//     const res = await fetch('./data/ai_interview.json');
//     const data = await res.json();
//     console.log("AI Interview Data:", data);
//     // TODO: Display interview questions and simulate chat
// }

// Initialize demo mode on page load
document.addEventListener('DOMContentLoaded', () => {
    loadTrendAnalysis();
    loadSkillGap();
    loadRoadmap();
    loadAIInterview();
});
</script>


<script>
async function loadInterviewData() {
    try {
        const questionsResponse = await fetch('data/interview_questions.json');
        const questionsData = await questionsResponse.json();

        const feedbackResponse = await fetch('data/interview_feedback.json');
        const feedbackData = await feedbackResponse.json();

        window.interviewQuestions = questionsData.questions;
        window.interviewFeedback = feedbackData.feedback;
        window.interviewEvaluation = feedbackData.evaluation;

        if (window.interviewQuestions.length > 0) {
            document.getElementById('questionText').innerText =
                window.interviewQuestions[0].question;
        }
    } catch (error) {
        console.error('Error loading interview data:', error);
    }
}

document.addEventListener('DOMContentLoaded', loadInterviewData);
</script>

</body>
</html>